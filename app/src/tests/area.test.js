import * as turf from '@turf/turf';
import getArea from 'utils/getArea';

const square = turf.polygon([
  [
    [2.2919046878814697, 48.85770582708133],
    [2.293460369110107, 48.85676699291116],
    [2.29689359664917, 48.85901169495529],
    [2.2952628135681152, 48.860091657242556],
    [2.2919046878814697, 48.85770582708133],
  ],
]);

const diamond = turf.polygon([
  [
    [2.2956061363220215, 48.854783383117244],
    [2.2960352897644043, 48.854557486625396],
    [2.298835515975952, 48.85495280481723],
    [2.2995758056640625, 48.85545400732256],
    [2.3002195358276367, 48.857402296155435],
    [2.2999727725982666, 48.85766347403937],
    [2.2967326641082764, 48.85712699907286],
    [2.296217679977417, 48.85673875702427],
    [2.2956061363220215, 48.854783383117244],
  ],
]);

const concave = turf.polygon([
  [
    [2.3013031482696533, 48.85227022723685],
    [2.301689386367798, 48.85253849146323],
    [2.3020541667938232, 48.852347882818634],
    [2.303706407546997, 48.85345622663062],
    [2.3034167289733887, 48.853703306301384],
    [2.3037922382354736, 48.85392214727714],
    [2.2998225688934326, 48.85644933826542],
    [2.299565076828003, 48.85541871153572],
    [2.2990500926971436, 48.85506575229865],
    [2.29738712310791, 48.8547480868576],
    [2.3013031482696533, 48.85227022723685],
  ],
]);

const multiPolygon = turf.multiPolygon([
  [
    [
      [2.298662720024396, 48.8587067835814],
      [2.3003745380546547, 48.8590587311522],
      [2.3006479534350603, 48.859879932527235],
      [2.2995424042899515, 48.859574916446405],
      [2.2990906745319535, 48.86011455901689],
      [2.2985081808972154, 48.860489959112726],
      [2.2967131494899036, 48.85987211162529],
      [2.298662720024396, 48.8587067835814],
    ],
  ],
  [
    [
      [2.2991263287945287, 48.86056034418928],
      [2.2991263287945287, 48.860325719789245],
      [2.2995780585525267, 48.860325719789245],
      [2.2995780585525267, 48.86056034418928],
      [2.2991263287945287, 48.86056034418928],
    ],
  ],
]);

it('single convex shape', () => {
  expect(getArea({ features: [square] })).toEqual(58019.46053041113);
});

it('multiple convex shapes', () => {
  expect(getArea({ features: [square, diamond] })).toEqual(136323.05993785465);
});

it('concave shape', () => {
  expect(getArea({ features: [concave] })).toEqual(99653.62847557105);
});

it('multiPolygon shape', () => {
  expect(getArea({ features: [multiPolygon] })).toEqual(29989.392977005642);
});
